{% extends "base.html" %}

{% block content %}
<div class="container" style="padding-top: 20px;">
    <div class="card">
        <div class="card-header">
            <h2>üèÜ Liderlik Tablosu</h2>
        </div>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="text-align: left; border-bottom: 2px solid #444;">
                        <th style="padding: 15px;">#</th>
                        <th>Oyuncu</th>
                        <th>Net Servet</th>
                        <th>Nakit</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    <!-- JS ile doldurulacak -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', fetchLeaderboard);

async function fetchLeaderboard() {
    try {
        const res = await fetch('/api/leaderboard');
        const data = await res.json();
        
        const tbody = document.getElementById('leaderboard-body');
        if (!tbody) return;
        
        tbody.innerHTML = data.map((u, index) => `
            <tr style="border-bottom: 1px solid #333;">
                <td style="padding: 15px; font-weight: bold; color: ${index < 3 ? 'var(--warning)' : 'inherit'}">
                    ${index + 1}
                </td>
                <td style="font-weight: bold;">${u.username}</td>
                <td style="color: var(--success);">${new Intl.NumberFormat('tr-TR').format(u.net_worth)} TL</td>
                <td style="color: var(--text-muted);">${new Intl.NumberFormat('tr-TR').format(u.money)} TL</td>
            </tr>
        `).join('');
    } catch (e) {
        console.error("Leaderboard fetch error:", e);
    }
}
</script>
{% endblock %}