<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Market - KayÄ±t Ol</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="login-container" style="display:flex; align-items:center; justify-content:center; min-height:100vh;">
        <div class="card login-box" style="max-width:420px; width:100%;">
            <h1 style="text-align:center; margin-bottom:10px;">ğŸŒ Global Market</h1>
            <p style="color:var(--text-muted); text-align:center">Yeni bir hesap oluÅŸturun.</p>
            <div style="margin-top: 20px;">
                <label style="display:block; margin-bottom:6px;">KullanÄ±cÄ± AdÄ±</label>
                <input type="text" id="reg-username" placeholder="KullanÄ±cÄ± AdÄ±" autocomplete="off" style="width:100%; padding:12px; font-size:1em;">
                <label style="display:block; margin:12px 0 6px;">Åifre</label>
                <div style="display:flex; align-items:center; gap:8px;">
                    <input type="password" id="reg-password" placeholder="Åifre (min. 6)" autocomplete="off" style="flex:1; padding:12px; font-size:1em;">
                    <button class="btn btn-secondary btn-sm" onclick="togglePw()">GÃ¶ster</button>
                </div>
                <div id="reg-error" style="color:var(--danger); margin-top:8px; display:none;"></div>
                <button class="btn" style="width:100%; margin-top:20px; padding:12px; font-size:1.05em;" onclick="register()">KayÄ±t Ol</button>
            </div>
            <div style="margin-top: 18px; text-align: center;">
                <a href="/login" style="color:var(--primary); text-decoration:none;">Zaten hesabÄ±n var mÄ±? GiriÅŸ Yap</a>
            </div>
        </div>
    </div>
    <script>
    function togglePw() {
        const ip = document.getElementById('reg-password');
        ip.type = ip.type === 'password' ? 'text' : 'password';
    }
    async function register() {
        const u = document.getElementById('reg-username').value.trim();
        const p = document.getElementById('reg-password').value;
        const err = document.getElementById('reg-error');
        err.style.display = 'none';
        err.textContent = '';
        if (!u) {
            err.textContent = 'KullanÄ±cÄ± adÄ± gerekli';
            err.style.display = 'block'; return;
        }
        if (!p || p.length < 6) {
            err.textContent = 'Åifre en az 6 karakter';
            err.style.display = 'block'; return;
        }
        const res = await fetch('/register', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({username: u, password: p})});
        const data = await res.json();
        if (data.success) {
            alert(data.message);
            window.location.href = '/login';
        } else {
            err.textContent = data.message || 'KayÄ±t baÅŸarÄ±sÄ±z';
            err.style.display = 'block';
        }
    }
    </script>
</body>
</html>
